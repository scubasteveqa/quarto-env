---
title: "Environment Variables Example"
format: html
server: shiny
---

```{r setup}
#| context: setup
library(shiny)
```

```{r}
#| context: server
#| echo: true

# Create a reactive to get environment variables
env_vars <- reactive({
  # Get all environment variables for debugging purposes
  all_env <- Sys.getenv()
  
  # Focus on our two variables of interest
  list(
    QUARTO_PROFILE = Sys.getenv("QUARTO_PROFILE", unset = "Not set"),
    R_CONFIG_ACTIVE = Sys.getenv("R_CONFIG_ACTIVE", unset = "Not set")
  )
})

# Render the environment variables
output$env_output <- renderTable({
  data.frame(
    Variable = c("QUARTO_PROFILE", "R_CONFIG_ACTIVE"),
    Value = c(env_vars()$QUARTO_PROFILE, env_vars()$R_CONFIG_ACTIVE)
  )
})

# Render all environment variables (helpful for debugging in Connect)
output$all_env_output <- renderPrint({
  # Sort environment variables alphabetically for easier viewing
  sort(names(Sys.getenv()))
})
```

## Environment Variables

This document displays the values of two specific environment variables:

* `QUARTO_PROFILE`: Used by Quarto to determine which profile to use for rendering
* `R_CONFIG_ACTIVE`: Used by the config package to determine which configuration to use

```{r}
#| context: output
#| echo: false

tableOutput("env_output")
```


```{r}
#| context: output
#| echo: false

verbatimTextOutput("all_env_output")
```
